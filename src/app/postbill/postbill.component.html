<div class="p-4 sm:ml-64">

  <br>
  <div class="">

    <div class="">





      &nbsp;

      <br>
      <h3>จำนวนการยืม : {{length_p}} ใบงาน</h3>



      <br>

      <input class="form-control mr-sm-2" type="search" placeholder="ค้นหา" aria-label="Search" [(ngModel)]="keysearch"
        (keyup)="updateFilter()">



      <br>
      <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded"
        data-bs-toggle="modal" data-bs-target="#showbill" (click)="submit1()">
        <!--(click)="deselectAll1()"  (click)="deleteSelected()"  -->
        คืน
      </button>



      <div class="relative overflow-x-auto shadow-md sm:rounded-lg mt-3">



        <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400 table table-hover" id="dataTable">


          <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-left">
            <tr>

              <th scope="col" class="p-4">
                <div class="flex items-center">
                  <input id="checkbox-all-search" type="checkbox" [(ngModel)]="selectAll" (change)="toggleSelectAll()"
                    class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                  <label for="checkbox-all-search" class="sr-only">checkbox</label>
                </div>

              </th>
              <th scope="col" class="px-6 py-3">
                ชื่อผู้ยืม
              </th>
              <!--
              <th scope="col" class="px-6 py-3">
                วัน/เวลา
              </th>
              -->
              <th scope="col" class="px-6 py-3">
                รหัสสินค้า
              </th>
              <th scope="col" class="px-6 py-3">
                ชื่อสินค้า
              </th>
              <th scope="col" class="px-6 py-3 text-center">
                ชื่อรุ่น
              </th>
              <th scope="col" class="px-6 py-3 text-end">
                จำนวน
              </th>



              <th scope="col" class="px-6 py-3 text-center">
                Action
              </th>
            </tr>
          </thead>



          <tbody>
            <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 "
              *ngFor="let bill of billList">
              <td class="w-4 p-4">
                <div class="flex items-center"><!--*ngFor="let item of productList"-->
                  <input id="checkbox-table-search-1" type="checkbox" [(ngModel)]="bill.selected"
                    (change)="checkboxChanged()"
                    class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                  <label for="checkbox-table-search-1" class="sr-only">checkbox</label>
                </div>


              </td>
              <td scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-black">
                {{bill.firstname}} {{bill.lastname}}</td>
                <!--
              <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-black">{{bill.day_b}}</td>
              -->
              <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-black">{{bill._id}}</td>


              <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-black" colspan="3">

             <li *ngFor="let item of bill.billItems"  class="d-flex justify-content-between">
              <div >{{item.product_no}}</div>
              <div> {{item.product_name}}</div>
              <div> {{item.amount}}</div>

            </li>
            </td>




              <td class="text-center">
                <button
                  class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded "
                  data-bs-toggle="modal" data-bs-target="#showbill" (click)="submit1()">
                  <!--(click)="deselectAll1()"  (click)="deleteSelected()"  -->
                  คืน
                </button>



              </td>

            </tr>

          </tbody>
        </table>
      </div>






      <div class="modal fade" id="showbill" tabindex="-1" aria-labelledby="example" aria-hidden="true"
        *ngFor="let databill of selectedCheckboxes">
        <div class="card">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <div class="card-body mx-4">
                  <div class="container">
                    <svg class="h-8 w-8 text-red-500" width="24" height="24" viewBox="0 0 24 24" stroke-width="2"
                      stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"
                      data-bs-dismiss="modal" aria-label="Close" style="margin-left: 350px; margin-top: 1px;">
                      <path stroke="none" d="M0 0h24v24H0z" />
                      <line x1="18" y1="6" x2="6" y2="18" />
                      <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                    <p class="my-1 mx-5" style="font-size: 30px; text-align: center; margin-top: 5px;">รายละเอียด</p>
                    <br>
                    <div class="row">
                      <ul class="list-unstyled">
                        <li class="text-black">ชื่อผู้ยืม: </li>
                        <!--
                        <li class="text-muted mt-1"><span class="text-black">Invoice</span> #12345</li>
                        -->
                        <!--<li class="text-black mt-1">{{ day_b }}  น. </li>-->

                      </ul>
                      <hr>



                    </div>
                    <div class="row" *ngFor="let databill of selectedCheckboxes">
                      <div class="col-xl-12">
                        <p>ชื่อสินค้า : {{ databill.product_name }}</p>
                        <p>ชื่อรุ่น : {{ databill.model }}</p>
                        <p class="float-end">จำนวน : {{databill.amount}}
                        <div>
                        </div>
                      </div>

                      <hr>
                    </div>
                    <div class="row">

                      <hr style="border: 2px solid black;">
                    </div>
                    <div class="row text-black">

                      <div class="col-xl-12">
                        <p class="float-end fw-bold">จำนวนทั้งหมด :
                        </p>
                      </div>
                      <hr style="border: 2px solid black;">
                    </div>
                    <div class="text-center">
                      <button type="button" class="btn btn-outline-primary">ยืนยัน</button>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>














    </div>


  </div>
</div>
